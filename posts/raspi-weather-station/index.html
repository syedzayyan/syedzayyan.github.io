<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title> Making a Weather Station in Raspberry Pi </title><link href=/menu_icon/profile_pic.png rel=icon type=image/png><link href="https://syedzayyan.com/ atom.xml" title="Syed Zayyan Masud" rel=alternate type=application/atom+xml><link href=https://syedzayyan.com/main.css media=screen rel=stylesheet><meta content="A personal portfolio/blog website of Syed Zayyan Masud" name=description><meta content="A personal portfolio/blog website of Syed Zayyan Masud" name=description><meta content="index, nofollow" name=robots><meta content="Syed Zayyan Masud" property=og:title><meta content=article property=og:type><meta content=/menu_icon/profile_pic.png property=og:image><meta content=/menu_icon/profile_pic.png name=twitter:card><meta content=https://syedzayyan.com/posts/raspi-weather-station/ property=og:url><meta content="A personal portfolio/blog website of Syed Zayyan Masud" property=og:description><meta content="Syed Zayyan Masud" property=og:site_name><meta content="default-src 'self' ws://127.0.0.1:1024/; img-src 'self' https://*; script-src 'self'; style-src 'self'; font-src 'self'" http-equiv=Content-Security-Policy><body><header><div class=navbar><div class="nav-title nav-navs"><a class="nav-links home-title" href=https://syedzayyan.com>Syed Zayyan Masud</a></div><nav class="nav-title nav-navs"><a class=nav-links href=/projects> <img alt=Projects height=15 src=/menu_icon/projects.png width=15> Projects</a><a class=nav-links href=/about> <img alt=About height=15 src=/menu_icon/profile_pic.png width=15> About</a></nav><nav class="socials nav-navs"><label class=theme-switcher for=themeswitch><div class=background></div> <input id=themeswitch type=checkbox> <div class=switch><img alt="theme switch to dark" class=moon src=/menu_icon/moon.png><img alt="theme switch to light" class=sun src=/menu_icon/sun.png></div></label></nav></div></header><div class=content><main><article><div class=title><h2>Making a Weather Station in Raspberry Pi</h2><div class=meta>Posted on <time>2021-02-18</time><div class=post-tags><nav class="nav tags">üè∑: <a href=https://syedzayyan.com/tags/show-off/>show off</a> ¬†</nav></div> ||<span> 4 minute read</span></div></div><h1>Table of Contents</h1><ul><li><a href=https://syedzayyan.com/posts/raspi-weather-station/#introduction>Introduction</a><li><a href=https://syedzayyan.com/posts/raspi-weather-station/#the-shopping>The Shopping</a><li><a href=https://syedzayyan.com/posts/raspi-weather-station/#tan-tan-tana-problem>Tan tan tana!! Problem.</a><li><a href=https://syedzayyan.com/posts/raspi-weather-station/#solution>Solution ?</a><li><a href=https://syedzayyan.com/posts/raspi-weather-station/#the-coding-phase>The coding phase</a><li><a href=https://syedzayyan.com/posts/raspi-weather-station/#the-case>The case.</a><li><a href=https://syedzayyan.com/posts/raspi-weather-station/#poorly-written-golang>Poorly written Golang</a></ul><section class=body><h1 id=introduction>Introduction</h1><p>I got my Raspberry Pi Zero W last year. Since then it had been collecting dust. I should have considered my experience with programming and the few stints that had happened along the way before making such an impulse buy. But, hey! That's why they are called impulses. However, COVID happened, and Coursera was almost free for half the year. I enrolled in a bunch of courses, I built a few things along the way, including the website you are on right now. I thought of giving the Pi another try.<h1 id=the-shopping>The Shopping</h1><p>I got inspired to build a weather station from this Reddit <a href=https://www.reddit.com/r/raspberry_pi/comments/nrus9l/i_too_built_uteharguss_weather_station_and_it_is/>post</a>. I got onto Pi Hut again. I bought:<ul><li><a href=https://thepihut.com/products/gpio-header-for-raspberry-pi-a-b-pi-2-pi-3-pi-4-zero>A header, because I didn‚Äôt have headers on my Pi</a><li><a href="https://thepihut.com/products/1-14-ips-lcd-display-module-240x135?variant=39693670252739">An LCD display, A 1.14 inch tiny WaveShare LCD display</a><li><a href="https://thepihut.com/products/ethernet-and-usb-hub-hat-for-raspberry-pi?variant=31844897488958">A network HAT</a><li><a href="https://thepihut.com/products/rj45-cat5e-ethernet-lan-cable-2m-black?variant=20063167578174">An ethernet cable</a><li><a href="https://thepihut.com/products/miniature-5v-cooling-fan-for-raspberry-pi-and-other-computers?variant=31955934417">A cute little fan</a></ul><h1 id=tan-tan-tana-problem>Tan tan tana!! Problem.</h1><p>A very ultra silly mistake too. I didn‚Äôt have a soldering iron. Don‚Äôt be me and try to bend the around pins by hand. The contacts are unstable and it just does not work. I did not take a picture to torture your eyes and partly because I did not plan that I was going to make a blog post. And the project got side-lined. I got busy doing other things. But on Prime Day, Pi Hut also offered free delivery.<h1 id=solution>Solution ?</h1><p>Luckily there are these <a href="https://thepihut.com/products/gpio-hammer-header-solderless?variant=28950933073">hammer headers</a> for people like me who can‚Äôt solder to save their lives. If you don‚Äôt like the sound of hammering your Pi, buy them with pre-soldered headers. Again don‚Äôt be me.<h1 id=the-coding-phase>The coding phase</h1><p>I thought I could copy the code from u/tehargus, with some minor adjustments. But being the miser I am I bought a different cheaper mini LCD display. Fortunately Waveshare had a bunch of guides on their website, and I ditched the code from u/tehargus. The <a href=https://github.com/syedzayyan/pi_weather>code</a> is pretty self explanatory. It has an infinite loop up top that runs every 100 seconds. It consumes the Open Weather API and prints the contents to the screen. Specifically the:<ul><li>Minimum and Maximum temperatures for the day<li>What it feels like<li>The current temperature<li>The probability of rain<li>Prints the CPU temperature. Not from the API, (duh!).</ul><p>The code requires a .env file as it requires:<ul><li>API_KEY<li>LOCATION<li>LATITUDE<li>LONGITUDE</ul><p>At the end of the loop there's a 100 second sleep because in the free version Open Weather only allows 1000 API calls a day. If I did my calculation right 100 seconds intervals should be enough. Perks of copying code<p>The folder structure is complicated. I know. Font and Lib came from Waveshare tutorials. I didn‚Äôt touch it because I was scared to break things again. The pic folder contains the pictures from OpenWeather to be displayed. The main folder contains main.py with the actual code. You can tinker around if you‚Äôd like. :) Here‚Äôs the finished product.<p><img alt="Pi Weather Box" src=/img/blog-img/raspi-weather/raspi_weather.jpg><h1 id=the-case>The case.</h1><p>You might be asking why it‚Äôs in a Seagate One Touch Hard Disk box, with a fan and ethernet port that only consumes an API. Because it‚Äôs connected to a 2TB hard drive that‚Äôs inside.<p><img alt="Sneak Peak in Pi Weather Box" src=/img/blog-img/raspi-weather/inside_peak.jpg><h1 id=poorly-written-golang>Poorly written Golang</h1><p>The Pi also runs an HTTP File server I wrote in Golang. Here‚Äôs the <a href=https://github.com/syedzayyan/pi-file-server>code</a> for it. Maybe I‚Äôd write about it some other day when I am well versed with Golang. But in short it has a bunch of API endpoints that can be used for reading, putting and deleting files on the disk. A SvelteJS frontend consumes those APIs. So, if you have a Pi, don‚Äôt let it collect dust. It‚Äôs a powerful little machine that can do just about anything you can imagine. Probably not running your machine learning algorithms, but a weather station is a start!<blockquote><p>P.S The Pi also runs Pi Hole. That‚Äôs why the fan and CPU temp reading to keep it cool.</blockquote></section></article></main></div><footer><section><nav><a class="nav-links social" rel="noopener noreferrer" href=https://youtube.com/@zayyanmasud target=_blank> <img alt=youtube src=/social_icons/youtube.svg title=youtube> </a><a class="nav-links social" rel="noopener noreferrer" href=https://github.com/syedzayyan/ target=_blank> <img alt=github src=/social_icons/github.svg title=github> </a></nav><nav><span classname=desktop-only>This blog is powered by <a rel="noopener noreferrer" href=https://getzola.org/ target=_blank>Zola</a> with theme by <a rel="noopener noreferrer" href=https://syedzayyan.com/ target=_blank>SZM</a></span></nav></section><script src=https://syedzayyan.com/js/main.js></script></footer>